<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –ö–ª–∏–∫–µ—Ä</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <!-- Canvas –¥–ª—è –ø–ª–∞–Ω–µ—Ç–∞—Ä–Ω–æ–≥–æ —Ñ–æ–Ω–∞ -->
  <canvas id="planetBackgroundCanvas"></canvas>
  <!-- UI -->
  <div id="header">
    <h2 id="gameTitle">‚òø –ú–µ—Ä–∫—É—Ä–∏–π</h2>
  </div>
  <!-- –ö–Ω–æ–ø–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è -->
  <button id="saveBtn" title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–≥—Ä—É">
    <i class="fas fa-save"></i>
  </button>
  <!-- HUD -->
  <div id="hud-left">
    <div class="hud-item" id="coins"><i class="fas fa-gem"></i> –ö—Ä–∏—Å—Ç–∞–ª–ª—ã: <span id="coins-value">0</span></div>
    <div class="hud-item" id="clickPowerInfo"><i class="fas fa-fist-raised"></i> –°–∏–ª–∞: <span id="clickPower-value">1</span></div>
    <div class="hud-item" id="critChanceInfo"><i class="fas fa-star"></i> –ö—Ä–∏—Ç: <span id="critChance-value">0.1%</span></div>
    <div class="hud-item" id="critMultiplierInfo"><i class="fas fa-star"></i> –ú–Ω–æ–∂: <span id="critMultiplier-value">x2.0</span></div>
  </div>
  <!-- –ü–†–û–ì–†–ï–°–°-–ë–ê–† -->
  <div id="progressContainer">
    <div id="progressBar"></div>
  </div>
  <div id="progressText">–ü—Ä–æ–≥—Ä–µ—Å—Å: 0.00000 / 0.38710 –∞.–µ. (0%)</div>
  <div id="gameArea"></div>
  <div id="levelAnnounce"></div>
  <!-- –ö–ù–û–ü–ö–ò –£–õ–£–ß–®–ï–ù–ò–ô -->
  <button id="upgradeClickBtn" class="upgrade-btn btn-unavailable">
    <i class="fas fa-fist-raised"></i>
    <div class="upgrade-cost">80</div>
  </button>
  <button id="upgradeHelperBtn" class="upgrade-btn btn-unavailable">
    <i class="fas fa-robot"></i>
    <div class="upgrade-cost">1500</div>
  </button>
  <button id="upgradeCritChanceBtn" class="upgrade-btn btn-unavailable">
    <i class="fas fa-star"></i>
    <div class="upgrade-cost">500</div>
  </button>
  <button id="upgradeCritMultBtn" class="upgrade-btn btn-unavailable">
    <i class="fas fa-star"></i>
    <div class="upgrade-cost">800</div>
  </button>
  <button id="upgradeHelperDmgBtn" class="upgrade-btn btn-unavailable">
    <i class="fas fa-bolt"></i>
    <div class="upgrade-cost">1000</div>
  </button>
  <!-- –ö–ù–û–ü–ö–ò –ú–ê–ì–ê–ó–ò–ù–ê -->
  <div id="shopContainer" class="shop-container">
    <button id="shopBtn" class="shop-btn" title="–ú–∞–≥–∞–∑–∏–Ω">
      <i class="fas fa-shopping-cart"></i>
    </button>
    <div id="shopPanel" class="shop-panel">
      <h3>üõí –ú–∞–≥–∞–∑–∏–Ω</h3>
      <div class="shop-item" id="shopTimeWarp">
        <i class="fas fa-hourglass-half"></i>
        <span>–ò—Å–∫–∞–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ (30—Å–µ–∫)</span>
        <div class="shop-cost">250</div>
      </div>
      <div class="shop-item" id="shopCrystalBoost">
        <i class="fas fa-gem"></i>
        <span>–£—Å–∏–ª–∏—Ç–µ–ª—å –∫—Ä–∏—Å—Ç–∞–ª–ª–æ–≤ (1–º–∏–Ω)</span>
        <div class="shop-cost">400</div>
      </div>
      <div class="shop-item" id="shopPowerSurge">
        <i class="fas fa-bolt"></i>
        <span>–°–∫–∞—á–æ–∫ —Å–∏–ª—ã (45—Å–µ–∫)</span>
        <div class="shop-cost">300</div>
      </div>
    </div>
  </div>
  <!-- –ü–ê–ù–ï–õ–¨ –î–û–°–¢–ò–ñ–ï–ù–ò–ô (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è) -->
  <div id="achievementsContainer" class="achievements-container">
    <button id="achievementsBtn" class="achievements-btn" title="–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è">
      <i class="fas fa-trophy"></i>
    </button>
    <div id="achievementsPanel" class="achievements-panel">
      <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è JavaScript -->
    </div>
  </div>
  
  <div id="tooltip" class="tooltip"></div>
  <canvas id="particlesCanvas"></canvas>
  
  <!-- –ó–≤—É–∫–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã -->
  <audio id="clickSound" preload="auto">
    <source src="audio/click.wav" type="audio/wav">
  </audio>
  <audio id="breakSound" preload="auto">
    <source src="audio/break.wav" type="audio/wav">
  </audio>
  <audio id="upgradeSound" preload="auto">
    <source src="audio/upgrade.wav" type="audio/wav">
  </audio>
  <audio id="comboSound" preload="auto">
    <source src="audio/combo.wav" type="audio/wav">
  </audio>
  <audio id="helperSound" preload="auto">
    <source src="audio/helper.wav" type="audio/wav">
  </audio>
  
  <!-- –≠–∫—Ä–∞–Ω—ã -->
  <div id="welcomeScreen">
    <h2>üöÄ –ö–û–°–ú–ò–ß–ï–°–ö–ò–ô –ö–õ–ò–ö–ï–†</h2>
    <p>–†–∞–∑—Ä—É—à–∞–π—Ç–µ –≤–æ—Å—Ö–æ–¥—è—â–∏–µ –±–ª–æ–∫–∏ –∏ —Å–æ–±–∏—Ä–∞–π—Ç–µ <strong>–∫–æ—Å–º–∏—á–µ—Å–∫–∏–µ –ö—Ä–∏—Å—Ç–∞–ª–ª—ã</strong>!</p>
    <p>–ö–∞–∂–¥—ã–π –±–ª–æ–∫ —Ç—Ä–µ–±—É–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É–¥–∞—Ä–æ–≤ –¥–ª—è —Ä–∞–∑—Ä—É—à–µ–Ω–∏—è.</p>
    <p><strong>–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:</strong></p>
    <p>üåå <strong>–ê—Å—Ç—Ä–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ –µ–¥–∏–Ω–∏—Ü—ã</strong> ‚Äî –ø–µ—Ä–µ–º–µ—â–∞–π—Ç–µ—Å—å –ø–æ –°–æ–ª–Ω–µ—á–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ</p>
    <p>ü™ê <strong>9 —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–ª–∞–Ω–µ—Ç</strong> ‚Äî –æ—Ç –ú–µ—Ä–∫—É—Ä–∏—è –¥–æ –ü–ª—É—Ç–æ–Ω–∞</p>
    <p>üöÄ <strong>–£–ª—É—á—à–µ–Ω–∏—è</strong> ‚Äî —É–≤–µ–ª–∏—á–∏–≤–∞–π—Ç–µ —Å–∏–ª—É, –∫—Ä–∏—Ç—ã –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –ø–æ–º–æ—â–Ω–∏–∫–∞</p>
    <p>‚ú® <strong>–†–µ–¥–∫–∏–µ –±–ª–æ–∫–∏</strong> ‚Äî –¥–∞—é—Ç –±–æ–Ω—É—Å—ã –∏ –æ–≥—Ä–æ–º–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã!</p>
    <button id="continueBtn" class="btn no-save">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
    <button id="startBtn" class="btn">–ù–æ–≤–∞—è –∏–≥—Ä–∞</button>
    <button id="langBtn-welcome" title="–°–º–µ–Ω–∏—Ç—å —è–∑—ã–∫">
      <span id="currentLangFlag">üá∑üá∫</span>
    </button>
  </div>
  
  <div id="saveScreen">
    <h2>–°–û–•–†–ê–ù–ï–ù–ò–ï –ò–ì–†–´</h2>
    <p>–•–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π –∏–≥—Ä—ã –∏–ª–∏ –Ω–∞—á–∞—Ç—å –Ω–æ–≤—É—é?</p>
    <button id="loadSaveBtn" class="btn">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é –∏–≥—Ä—É</button>
    <button id="newGameBtn" class="btn">–ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É</button>
    <button id="cancelSaveBtn" class="btn" style="background: #666;">–û—Ç–º–µ–Ω–∞</button>
  </div>
  
  <div id="gameOverScreen">
    <h2>–î–û–ë–´–ß–ê –ü–†–ï–†–í–ê–ù–ê!</h2>
    <div id="finalScore">–í—Å–µ–≥–æ —É—Ä–æ–Ω–∞: 0</div>
    <button id="restartBtn">–ù–æ–≤–∞—è –¥–æ–±—ã—á–∞</button>
    <button id="shareBtn">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è</button>
  </div>

  <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ -->
  <script src="js/translations.js"></script>
  <script src="js/save-system.js"></script>
  <script src="js/planet-background.js"></script>
  <script src="js/game-logic.js"></script>
  <script src="js/shop.js"></script>
  <script src="js/achievements.js"></script>
  
  <script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    document.addEventListener('DOMContentLoaded', function() {
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–ª–∞–Ω–µ—Ç–∞—Ä–Ω–æ–≥–æ —Ñ–æ–Ω–∞
      planetBackground.init();
      
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
      if (window.achievementsSystem) {
        achievementsSystem.init();
      }
      
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–∞–≥–∞–∑–∏–Ω–∞
      if (window.shopSystem) {
        shopSystem.init();
      }
      
      // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∂–µ—Å—Ç–æ–≤
      document.addEventListener('touchstart', function(e) {
        if (e.touches.length > 1) e.preventDefault();
      }, { passive: false });
      
      document.addEventListener('gesturestart', function(e) {
        e.preventDefault();
      }, { passive: false });
      
      document.addEventListener('gesturechange', function(e) {
        e.preventDefault();
      }, { passive: false });
      
      document.addEventListener('gestureend', function(e) {
        e.preventDefault();
      }, { passive: false });
    });
  </script>
<script>
  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
  function debugSave() {
    const saved = localStorage.getItem('cosmicBlocksSave');
    console.log('=== –î–ï–ë–ê–ì –°–û–•–†–ê–ù–ï–ù–ò–Ø ===');
    
    if (saved) {
      try {
        const data = JSON.parse(saved);
        console.log('‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ:', {
          timestamp: new Date(data.timestamp).toLocaleString(),
          coins: data.gameState?.coins,
          damage: data.gameState?.totalDamageDealt,
          location: data.gameState?.currentLocation,
          version: data.version
        });
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
        alert(`–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ!\n–ö—Ä–∏—Å—Ç–∞–ª–ª—ã: ${data.gameState?.coins}\n–£—Ä–æ–Ω: ${data.gameState?.totalDamageDealt}\n–ü–ª–∞–Ω–µ—Ç–∞: ${data.gameState?.currentLocation}\n–í—Ä–µ–º—è: ${new Date(data.timestamp).toLocaleString()}`);
      } catch (e) {
        console.error('‚ùå –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞:', e);
        alert('–û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è!');
      }
    } else {
      console.log('‚ùå –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ');
      alert('–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ!');
    }
  }
  
  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
  function clearSave() {
    if (confirm('–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è?')) {
      localStorage.removeItem('cosmicBlocksSave');
      console.log('üóëÔ∏è –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—á–∏—â–µ–Ω–æ');
      alert('–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—á–∏—â–µ–Ω–æ!');
      window.updateContinueButton();
    }
  }
  
  // –≠–∫—Å–ø–æ—Ä—Ç –¥–ª—è –∫–æ–Ω—Å–æ–ª–∏
  window.debugSave = debugSave;
  window.clearSave = clearSave;
</script>
<div style="position: fixed; bottom: 10px; left: 10px; z-index: 10000; display: none;">
  <button onclick="debugSave()" style="background: #2196F3; color: white; padding: 5px 10px; border: none; border-radius: 5px; margin: 2px;">Debug Save</button>
  <button onclick="clearSave()" style="background: #f44336; color: white; padding: 5px 10px; border: none; border-radius: 5px; margin: 2px;">Clear Save</button>
  <button onclick="console.log(window.gameState)" style="background: #4CAF50; color: white; padding: 5px 10px; border: none; border-radius: 5px; margin: 2px;">Log State</button>
</div>
<script>
  // –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
  document.addEventListener('DOMContentLoaded', function() {
    console.log('=== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò–ì–†–´ ===');
    
    // –°–Ω–∞—á–∞–ª–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–∏—Å—Ç–µ–º—ã –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ
    if (window.planetBackground && window.planetBackground.init) {
      window.planetBackground.init();
    }
    
    // –î–∞–µ–º –≤—Ä–µ–º—è –Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
    setTimeout(function() {
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –ª–∏ gameState –∏ gameMetrics
      if (!window.gameState || !window.gameMetrics) {
        console.error('gameState –∏–ª–∏ gameMetrics –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã!');
        
        // –°–æ–∑–¥–∞–µ–º –∏—Ö –≤—Ä—É—á–Ω—É—é, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
        if (!window.gameState) window.gameState = {};
        if (!window.gameMetrics) window.gameMetrics = {};
      }
      
      console.log('–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:', {
        coins: window.gameState.coins,
        damage: window.gameState.totalDamageDealt,
        location: window.gameState.currentLocation
      });
      
      // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è
      if (typeof window.updateContinueButton === 'function') {
        window.updateContinueButton();
      }
      
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –¥—Ä—É–≥–∏–µ —Å–∏—Å—Ç–µ–º—ã
      if (window.achievementsSystem && window.achievementsSystem.init) {
        window.achievementsSystem.init();
      }
      
      if (window.shopSystem && window.shopSystem.init) {
        window.shopSystem.init();
      }
      
      // –ó–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä–æ–≤—É—é –ª–æ–≥–∏–∫—É
      if (window.gameFunctions && window.gameFunctions.updateHUD) {
        window.gameFunctions.updateHUD();
        window.gameFunctions.updateUpgradeButtons();
        window.gameFunctions.setLocation(window.gameState.currentLocation || 'mercury');
      }
      
      if (typeof window.updateLanguageFlag === 'function') {
        window.updateLanguageFlag();
      }
      
      if (typeof window.updateAllTranslations === 'function') {
        window.updateAllTranslations();
      }
      
      console.log('‚úÖ –ò–≥—Ä–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
    }, 300);
  });
</script>
</body>
</html>